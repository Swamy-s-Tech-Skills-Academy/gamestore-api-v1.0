# GameStore API v1.0: Basic In-Memory Collection API

## Project Structure

```
src/GameStore.Api/
├── Models/
│   ├── Game.cs
│   └── Genre.cs
├── Program.cs
```

## Current Implementation Features

- Basic CRUD operations for game management
- In-memory collection for data storage
- JSON formatted responses
- Data annotations for validation
- RESTful API design

## API Endpoints

| Method | Route       | Description     | Status Codes  |
| ------ | ----------- | --------------- | ------------- |
| GET    | /           | Welcome message | 200           |
| GET    | /games      | Get all games   | 200           |
| GET    | /games/{id} | Get game by ID  | 200, 404      |
| POST   | /games      | Create game     | 201, 400      |
| PUT    | /games/{id} | Update game     | 204, 400, 404 |
| DELETE | /games/{id} | Delete game     | 204, 404      |

## Data Models

### Game

```csharp
public class Game
{
    public Guid Id { get; set; }

    [Required]
    [StringLength(50, MinimumLength = 3, ErrorMessage = "The name must be between 3 and 50 characters long.")]
    public required string Name { get; set; }

    [Required]
    [StringLength(20, MinimumLength = 3, ErrorMessage = "The genre must be between 3 and 20 characters long.")]
    public required string Genre { get; set; }

    [Range(1, 100, ErrorMessage = "The price must be between $1 and $100.")]
    public decimal Price { get; set; }

    public DateOnly ReleaseDate { get; set; }
}
```

## Code Walkthrough

### Program.cs

```csharp
using GameStore.Api.Models;

WebApplicationBuilder? builder = WebApplication.CreateBuilder(args);
WebApplication? app = builder.Build();

// Root endpoint
app.MapGet("/", () => new
{
    Message = "Welcome to the Games API",
    RequestId = Guid.NewGuid(),
    DateTime = DateTime.UtcNow
});

// Data Store - In-memory collection
List<Game> games = [
    // Sample data
];

// GET /games
app.MapGet("/games", () => games)
    .WithName("GetAllGames")
    .WithTags("Games");

// GET /games/{id}
app.MapGet("/games/{id:guid}", (Guid id) =>
{
    Game? game = games.FirstOrDefault(g => g.Id == id);
    return (game is null) ? Results.NotFound() : Results.Ok(game);
})
    .WithName("GetGameById")
    .WithTags("Games");

// POST /games
app.MapPost("/games", (Game game) =>
{
    game.Id = Guid.NewGuid();
    games.Add(game);
    return Results.CreatedAtRoute("GetGameById", new { id = game.Id }, game);
})
    .WithName("CreateGame")
    .WithTags("Games")
    .WithParameterValidation();

// PUT /games/{id}
app.MapPut("/games/{id:guid}", (Guid id, Game updatedGame) =>
{
    Game? existingGame = games.FirstOrDefault(g => g.Id == id);
    if (existingGame is null) return Results.NotFound();

    // Update properties
    existingGame.Name = updatedGame.Name;
    existingGame.Genre = updatedGame.Genre;
    existingGame.Price = updatedGame.Price;
    existingGame.ReleaseDate = updatedGame.ReleaseDate;

    return Results.NoContent();
})
    .WithName("UpdateGame")
    .WithTags("Games")
    .WithParameterValidation();

// DELETE /games/{id}
app.MapDelete("/games/{id:guid}", (Guid id) =>
{
    Game? existingGame = games.FirstOrDefault(g => g.Id == id);
    if (existingGame is null) return Results.NotFound();

    games.Remove(existingGame);
    return Results.NoContent();
})
    .WithName("DeleteGame")
    .WithTags("Games");

app.Run();
```

## Next Steps

The upcoming v1.1 will introduce:

1. Genre operations (endpoints for creating and managing genres)
2. Relationship between Games and Genres
3. Enhanced filtering capabilities
4. Improved error handling

This current implementation provides a solid foundation for building a more comprehensive API with additional features in future versions.

## Testing

The API can be tested using the provided HTTP file (`gamestore.http`) or any HTTP client like Postman or curl.

## Limitations

- In-memory storage: data is lost when the application restarts
- No persistence layer
- Limited error handling
- No logging or monitoring
- No authentication/authorization
